# Azure Storage Account Defender Malware Scanning

A function that wraps Azure Storage Malware scanning into a simple API.

Scanned blobs are subject to a lifetime policy that deletes them after 3 days.

```azd up -t AzureStorageMalwareScanning```

```curl -F "testfile=@/home/graeme/pictures/test.jpg" -H "x-functions-key=<function-code>" https://myfunction.azurewebsites.net/api/scan```

```json
{
    "result":"No threats found",
    "scanResult":"Ok",
    "fileName":"file1.txt",
    "id":"28dc03ef-67f2-43af-afe3-cea47b16db6e",
    "scanMs":8344
}
```

